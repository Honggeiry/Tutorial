---
import BaseLayout from "../../layouts/BaseLayout.astro"
const tags = ['astro', 'blogging', 'learning in public', 'successes', 'setbacks', 'community']
const pageTitle = "Tag Index";
---
<BaseLayout pageTitle={pageTitle}>
    <ul>
        {tags.map((tag) => <li>{tag}</li>)}
      </ul>
      export async function getStaticPaths() {
        const allPosts = await Astro.glob("../posts/*.md");
        const uniqueTags = [
          ...new Set(allPosts.map((post) => post.frontmatter.tags).flat()),
        ];
        return uniqueTags.map((tag) => {
          const filteredPosts = allPosts.filter((post) =>
            post.frontmatter.tags.includes(tag)
          );
          return {
            params: { tag },
            props: { posts: filteredPosts },
          };
        });
      }
</BaseLayout>